# Yojoa Remote Sensing - Secchi

This project is led by Jemma Fadum and is based on the work she did in her dissertation, 'INTRA AND INTER-ANNUAL PATTERNS IN LAKE YOJOA, HONDURAS: DISENTANGLING
BIOGEOCHEMICAL DRIVERS OF A TROPICAL MONOMICTIC LAKE ECOSYSTEM'. This repository of code is the start of a re-analysis of the results presented in chapter 5, 'REMOTE SENSING OF TROPHIC STATE IN LAKE YOJOA; A SUMMARY OF FUTURE OUTLOOKS AND OPPORTUNITIES', but updated to include Landsat missions 4-7 in addition to Landsat 8 & 9.

The Landsat record was last acquired in February of 2023 by B. Steele using the code in the subdirectory 'landsat_c2'.

A few notes about the collated/filtered/matchup data sets:

-   There are negative reflectance values in these data sets. Due to the updated storage of surface reflectance in Collection 2, we do not recommend throwing out any of the negative values at this time in algorithm development. It is likely that we will recommend a filter in the future for negative reflectance values that are unrealistic, but for now, please include them in your development.

-   The surface temp data doesn't look great for Yojoa. There are likely two main reasons for this:

    1) [Landsat 9 TIRS band has some anomolous data](https://www.usgs.gov/landsat-missions/news/recent-landsat-9-tirs-anomaly-pauses-processing-new-landsat-9-datahttps://www.usgs.gov/landsat-missions/news/recent-landsat-9-tirs-anomaly-pauses-processing-new-landsat-9-data) being reported at this time

    2) The surface temperature product validation is completed almost entirely with buoy data from North America in oceanic environments and little rigorous validation of site-specific data has been done (see also [Herrick and Steele, et al. 2023](https://esajournals.onlinelibrary.wiley.com/doi/full/10.1002/ecs2.4357))

-   Filters applied: in 1_RS_collate_harmonize.Rmd, we've done the minimum filtering in 'Filter scene summaries' (dswe1 must be \> 10, IMAGE_QUALITY \>= 7). We may suggest to update this with new filters in the near future.

-   We did not apply any Landsat 4-7/Landsat 8-9 handoff models. In the script X_LS_4-7_LS8-9_handoff.Rmd in the 'programs' subdirectory, we pull the 7/9 overlaps so you can easily apply if you wish to. Your decisions here may have implications for your model:

    -   if you have enough data points to do 4-7 algorithm development separately from 8-9, you should. The Rs value coming from the two differing atmospheric correction methods can be pretty different.

    -   on a quick look, there are over 200 matchups on Landsat 7, and you could, theoretically, apply that model to Landsat 4&5 if it was not over fit, with the caveat that the bands are not precisely the same. Band 7 and Band 4 are *slightly* different between 4/5 and 7. [Click here for band wavelengh designations](https://www.usgs.gov/faqs/what-are-band-designations-landsat-satellites).

# Folders

`data` this is a symlink folder that houses all of the data referenced in these scripts. Notes of how to link this to the OneDrive that I (B) shared with you are in the file `programs/2_LSC2_secchi_matchup.Rmd`.

`programs` contains the scripts that perform post-processing and collation of the GEE ouput from the `landsat_c2` folder. Script 1_RS_collate_harmonize.Rmd collates and harmonizes the output from GEE, 2_LSC2_secchi_matchup.Rmd creates the matchup files, X_LS4-7_LS8-9_handoff.Rmd is a quick model to aide in more transferable data between the two atmospheric correction methods.

`landsat_c2` contains the scripts used to run the GEE commands and pull the stacks. The raw output of these scripts have been saved in the `data/fromDrive` folder, which are copies from B's Google Drive.

# Data set column definitions, units, sources

These column names apply to the following files in the data folder:

`oneDay_LS-Secchi_matchups.csv`

`sameDay_LS-Secchi_matchups.csv`

`Yojoa_Landsat_C2_SRST_collated_v2023-03-03.csv` : all data from the Landsat C2 scripts, no filters applied

`Yojoa_Landsat_C2_SRST_filtered_v2023-03-03.csv` : suggested file for creating the matchups

| Column name (or prefix, suffix) | Definition                                                                                                                                                                                                                                                                                         | Missions                                            | Units                          | Data Source                   | Use Case                     |
|------------|-----------------|---------|---------|---------------|------------|
| \*\_Blue                        | Blue band reflectance                                                                                                                                                                                                                                                                              | all                                                 | unitless                       | GEE location-specific reducer | Algorithm development, QA    |
| \*\_Green                       | Green band reflectance                                                                                                                                                                                                                                                                             | all                                                 | unitless                       | GEE location-specific reducer | Algorithm development, QA    |
| \*\_Red                         | Red band reflectance                                                                                                                                                                                                                                                                               | all                                                 | unitless                       | GEE location-specific reducer | Algorithm development, QA    |
| \*\_Nir                         | Near Infrared reflectance                                                                                                                                                                                                                                                                          | all                                                 | unitless                       | GEE location-specific reducer | Algorithm development, QA    |
| \*\_Swir1                       | Short Wave Infrared 1 reflectance                                                                                                                                                                                                                                                                  | all                                                 | unitless                       | GEE location-specific reducer | Algorithm development, QA    |
| \*\_Swir2                       | Short Wave Infrared 2 reflectance                                                                                                                                                                                                                                                                  | all                                                 | unitless                       | GEE location-specific reducer | Algorithm development, QA    |
| \*\_Aerosol                     | Coatal aerosol band (or ultra Blue band) reflectance                                                                                                                                                                                                                                               | 8/9 only                                            | unitless                       | GEE location-specific reducer | Algorithm development, QA    |
| \*\_SurfaceTemp                 | Surface temperature estimate                                                                                                                                                                                                                                                                       | all                                                 | degrees Kelvin                 | GEE location-specific reducer | **do not use**               |
| med\*                           | median value within a 90m radius                                                                                                                                                                                                                                                                   | all                                                 | N/A, column prefix             | GEE location-specific reducer | Algorithm development, QA    |
| min\*                           | minimum value within a 90m radius                                                                                                                                                                                                                                                                  | all                                                 | N/A, column prefix             | GEE location-specific reducer | Algorithm development, QA    |
| max\*                           | maximum value within a 90m radius                                                                                                                                                                                                                                                                  | all                                                 | N/A, column prefix             | GEE location-specific reducer | Algorithm development, QA    |
| Q1\*                            | first quartile value within a 90m radius                                                                                                                                                                                                                                                           | all                                                 | N/A, column prefix             | GEE location-specific reducer | Algorithm development, QA    |
| Q3\*                            | third quartile value within a 90m radius                                                                                                                                                                                                                                                           | all                                                 | N/A, column prefix             | GEE location-specific reducer | Algorithm development, QA    |
| sd\*                            | standard deviation of the mean within a 90m radius                                                                                                                                                                                                                                                 | all                                                 | N/A, column prefix             | GEE location-specific reducer | QA                           |
| kurt_SurfaceTemp                | kurtosis of the surface temperature estimate distribution                                                                                                                                                                                                                                          | all                                                 | unitless                       | GEE location-specific reducer | **do not use**               |
| prop_clouds                     | proportion pixels with clouds in a 90m radius                                                                                                                                                                                                                                                      | all                                                 | proportion of 30 x 30 m pixels | GEE location-specific reducer | QA                           |
| prop_hillShadow                 | proportion of pixels NOT shadowed by surrounding topography                                                                                                                                                                                                                                        | all                                                 | proportion of 30 x 30 m pixels | GEE location-specific reducer | QA                           |
| pCount_dswe1                    | number of pixels in a 90m radius that are considered 'confident' open water                                                                                                                                                                                                                        | all                                                 | number of 30 x 30 m pixels     | GEE location-specific reducer | QA                           |
| pCount_dswe3                    | number of pixels in a 90m radius that are considered 'potential wetland'                                                                                                                                                                                                                           | all                                                 | number of 30 x 30 m pixels     | GEE location-specific reducer | QA                           |
| \*\_cloud_dist                  | distance to cloud (for any pixel in the 90m radius)                                                                                                                                                                                                                                                | all                                                 | 1 = 0.01 km                    | GEE location-specific reducer | QA                           |
| \`system:index\`                | Landsat-specific unique system identifier for the scene                                                                                                                                                                                                                                            | all                                                 | N/A                            | Scene-level data              | N/A                          |
| prop_medHighAero                | proportion of pixels in a 90m radius that have medium of high aerosol applied in the LaSRC atmospheric correction                                                                                                                                                                                  | 8/9 only                                            | proportion of 30 x 30 m pixels | GEE location-specific reducer | QA                           |
| rowid                           | rowid for GEE process, artefact of processing                                                                                                                                                                                                                                                      | all                                                 | N/A                            | N/A                           | N/A                          |
| WRS_PATH                        | WRS2 path of the image                                                                                                                                                                                                                                                                             | all                                                 | path number                    | Scene-level data              | N/A                          |
| WRS_ROW                         | WRS2 row of the image                                                                                                                                                                                                                                                                              | all                                                 | row number                     | Scene-level data              | N/A                          |
| mission                         | Spacecraft mission identifier                                                                                                                                                                                                                                                                      | all                                                 | N/A                            | Scene-level data              | Algorithm development        |
| date                            | date of image acquisition                                                                                                                                                                                                                                                                          | all                                                 | YYYY-MM-DD date                | Scene-level data              | Algorithm development, QA    |
| UTC_time                        | time of image acquisition                                                                                                                                                                                                                                                                          | all                                                 | Time in UTC                    | Scene-level data              | N/A                          |
| CLOUD_COVER                     | percent of scene with cloud cover                                                                                                                                                                                                                                                                  | all                                                 | percent                        | Scene-level data              | QA                           |
| IMAGE_QUALITY                   | scale of 0-9 quality of image for reflectance                                                                                                                                                                                                                                                      | all (this was originally IMAGE_QUALITY_OLI for 8/9) | N/A                            | Scene-level data              | QA                           |
| IMAGE_QUALITY_TIRS              | scale of 0-9 quality of image for thermal data                                                                                                                                                                                                                                                     | 8/9                                                 | N/A                            | Scene-level data              | QA                           |
| SUN_AZIMUTH                     | Sun azimuth angle in degrees for the image center location at the image center acquisition time. A positive value indicates angles to the east or clockwise from the north. A negative value indicates angles to the west or counterclockwise from the north.                                      | all                                                 | degrees                        | Scene-level data              | QA                           |
| SUN_ELEVATION                   | Sun elevation angle in degrees for the image center location at the image center acquisition time. A positive value indicates a daytime scene. A negative value indicates a nighttime scene. Note: For reflectance calculation, the sun zenith angle is needed, which is 90 - sun elevation angle. | all                                                 | degrees                        | Scene-level data              | QA                           |
| sat                             | artefact of processing, ignore                                                                                                                                                                                                                                                                     | N/A                                                 | N/A                            | N/A                           | no use                       |
| location                        | Yojoa-specific location - matches with the site location                                                                                                                                                                                                                                           | N/A                                                 | N/A                            | N/A                           | location_lat_longs_YOJOA.csv |

## Same-day and One-day matchups

The files sameDay_LS-Secchi_matchups.csv and oneDay_LS-Secchi_matchups.csv were created in the script 2_LSC2_secchi_matchup.Rmd in the programs directory.
